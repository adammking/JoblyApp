(this["webpackJsonpjobly-front"]=this["webpackJsonpjobly-front"]||[]).push([[0],{157:function(e,t,n){},162:function(e,t){},164:function(e,t){},178:function(e,t){},180:function(e,t){},208:function(e,t){},210:function(e,t){},211:function(e,t){},216:function(e,t){},218:function(e,t){},237:function(e,t){},249:function(e,t){},252:function(e,t){},299:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},322:function(e,t,n){},323:function(e,t,n){},325:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n.n(r),c=n(145),o=n.n(c),i=(n(157),n(2)),l=n.n(i),u=n(6),j=n(11),b=n(13),m=n(146),p=n(147);var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,a=Object(r.useState)(n),s=Object(j.a)(a,2),c=s[0],o=s[1];return Object(r.useEffect)((function(){c?localStorage.setItem(e,c):localStorage.removeItem(e)}),[e,c]),[c,o]},d=s.a.createContext();n(299);var h=function(e){var t=e.logout,n=Object(r.useContext)(d).currentUser;return Object(a.jsxs)("nav",{className:"Navigation navbar navbar-expand-md",children:[Object(a.jsx)(b.b,{className:"navbar-brand",to:"/",children:"Jobly"}),n?Object(a.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{className:"nav-item mr-4",children:Object(a.jsx)(b.c,{className:"nav-link",to:"/companies",children:"Companies"})}),Object(a.jsx)("li",{className:"nav-item mr-4",children:Object(a.jsx)(b.c,{className:"nav-link",to:"/jobs",children:"Jobs"})}),Object(a.jsx)("li",{className:"nav-item mr-4",children:Object(a.jsx)(b.c,{className:"nav-link",to:"/profile",children:"Profile"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(b.b,{className:"nav-link",to:"/",onClick:t,children:"Log out"})})]}):Object(a.jsx)("ul",{className:"navbar-nav ml-auto",children:Object(a.jsx)("li",{className:"nav-item mr-4",children:Object(a.jsx)(b.c,{className:"nav-link",to:"/login",children:"Login"})})})]})},O=n(9);var x=function(){var e=Object(r.useContext)(d).currentUser;return Object(a.jsx)("div",{className:"Home",children:Object(a.jsxs)("div",{className:"container text-center",children:[Object(a.jsx)("h1",{className:"mb-4 font-weight-bold",children:"Jobly"}),Object(a.jsx)("p",{className:"lead",children:"All the jobs in one convenient place."}),e?Object(a.jsxs)("h2",{children:["Welcome Back ",e.username,"!"]}):Object(a.jsx)(b.b,{className:"btn btn-primary font-weight-bold",to:"/login",children:"Log in"})]})})};var v=function(e){var t=e.item,n=void 0===t?{}:t,r=n.name,s=n.description,c=n.logo_url,o=n.handle;return Object(a.jsx)(b.b,{className:"Card card",to:"/companies/".concat(o),children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("h6",{className:"card-title d-flex justify-content-between",children:[Object(a.jsx)("span",{className:"text-capitalize",children:r}),Object(a.jsx)("img",{src:c||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAADkklEQVR42u3bvU8TcRjAca/lrbwUokEHF3WTwYXBycnN0T/UlYnJCRIWhoYJu0AiiQaL5Sp9wSckDi6lAwe/+/H55MYbnl/5hmuT5xrXUIHGE6iAsBAWwkJYICyEhbBAWAgLYYGwEBbCAmEhLIQFwkJYCAuEhbAQFggLYSEspimvhvtHxzt7h1++HiR+xZAxagwsrNRdlIPdg06/HGyur7x+8TTxK4bs3wzcuxwIK2md7ulaa2FjpdVs1ODTiyFj1Bi40z0RVtLOznurrcV6zRwDx9jCStpwNG4URc2+ShfFaDwRFn4VgrAQFsICYSGs+vnR63/7/nPKFTfc5/3CykSv/PP5w/aUK264z/uFhUchCAthISwQFsJCWCAshFVv7dbi9Hdm2v/vNFd9v7Ay8ax9y3s7ccN93i8sPApBWAgLYYGwEBbCAmEhrHrzlo6wKuEtHWEhLIQFwkJYCAuEhbAQFgjrLnlLR1iV8JaOsBAWwgJhISyEBcJCWHVg511YlbDzLiyEhbBAWAgLYYGwEBbCggcIq7wa7h8d7+wdTl/fTuGKIWPUGHjGo9l5f7CwLsrB7kGnXw42129Z307hiiH7NwP3LgeznM7O+4OF1emerrUWNlZazUYNnsIxZIwaA3e6J55uSYd1dt5bTebf9Yxi4BhbK0mHNRyNG0VRs8+oKEbjiVb8KkRYCAuEhbD+yWBh3M57imFlsDBu592jEGEhLBAWwkJYICyEhbAgobAyWBi3855iWBksjNt59yhEWAgLhIWwEBYIi0cQlp13O++VsPNu5x2EhbAQFggLYSEsEBbCQlh3yc67nfdK2Hm38w7CQlgIC4SFsBAW1CEsO+923ith593OOwgLYSEsEBbCQlggLISFsO6SnXc775Ww827nHYSFsBAWCAthISyoQ1hVL3QnuPOe4BEyDKvqhe4Ed94TPIJHIR6FCAuEhbAQFggLYSEsyCesqhe6E9x5T/AIGYZV9UJ3gjvvCR7BoxCPQoQFtQxrfq45ub6u12cUA881GzkdIcOwNtfXfiezMzSjGPj5RjunI2QY1tarlxfl1Xm/HE8m6f89YsgYNQaOsXM6QoZhtZeXPm5vLS8tnf26Zcs2hSuGjFFj4Bg7pyPk+eW9tTD//u2bT+/fTd+yTeGKIWPUGDi/I/hViF+FICyEhbBAWAgLYYGwEBbCQlg+AoSFsBAWCAthISwQFsLisfoLOHVMC5daNyQAAAAASUVORK5CYII=",alt:"".concat(r," Logo")})]}),Object(a.jsx)("p",{children:s})]})})};var g=function(e){var t=e.item,n=void 0===t?{}:t,r=e.handleApply,s=n.title,c=n.salary,o=n.equity;return Object(a.jsx)("div",{className:"Card card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h6",{className:"card-title d-flex justify-content-between",children:Object(a.jsx)("span",{className:"text-capitalize",children:s})}),Object(a.jsxs)("div",{children:["Salary: ",c]}),Object(a.jsxs)("div",{children:["Equity: ",o]}),Object(a.jsx)("button",{className:"btn btn-danger font-weight-bold text-uppercase float-right",onClick:r,disabled:n.state,children:n.state?"Applied":"Apply"})]})})};n(304);var y=function(e){var t=e.item,n=void 0===t?{}:t,r=e.apply,s=void 0===r?function(){return null}:r,c=e.idx;return n.handle?Object(a.jsx)(v,{item:n}):Object(a.jsx)(g,{item:n,handleApply:function(){return s(c)}})};var N=function(e){var t=e.cards,n=void 0===t?[]:t,r=e.apply,s=void 0===r?function(){return null}:r;return n.length?Object(a.jsx)("div",{className:"CardList",children:n.map((function(e,t){return Object(a.jsx)(y,{item:e,idx:t,apply:s},t)}))}):Object(a.jsx)("p",{className:"lead",children:"Sorry, no results were found!"})},w=n(24),C=n(5);n(305);var A=function(e){var t=e.searchFor,n=e.view,s=Object(r.useState)({name:"",title:"",minEmployees:"",maxEmployees:"",hasEquity:"",minSalary:""}),c=Object(j.a)(s,2),o=c[0],i=c[1];function l(e){e.preventDefault(),"jobs"===n?(o.title,o.hasEquity,o.minSalary):(o.name,o.minEmployees,o.maxEmployees),t(o)}function u(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(w.a)({},n,a))}))}var b=Object(a.jsx)("div",{className:"Search mb-4",children:Object(a.jsxs)("form",{className:"form-inline",onSubmit:l,children:[Object(a.jsx)("input",{className:"form-control form-control-lg flex-grow-1",name:"title",placeholder:"Job Title",value:o.title,onChange:u}),Object(a.jsx)("input",{className:"form-control form-control-lg flex-grow-1",name:"hasEquity",placeholder:"Enter true or false for equity",value:o.hasEquity,onChange:u}),Object(a.jsx)("input",{className:"form-control form-control-lg flex-grow-1",name:"minSalary",placeholder:"Minimum Salary",value:o.minSalary,onChange:u}),Object(a.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary",children:"Submit"})]})}),m=Object(a.jsx)("div",{className:"Search mb-4",children:Object(a.jsxs)("form",{className:"form-inline",onSubmit:l,children:[Object(a.jsx)("input",{className:"form-control form-control-lg flex-grow-1",name:"name",placeholder:"Company name",value:o.name,onChange:u}),Object(a.jsx)("input",{className:"form-control form-control-lg flex-grow-1",name:"minEmployees",placeholder:"Minimum Employees",value:o.minEmployees,onChange:u}),Object(a.jsx)("input",{className:"form-control form-control-lg flex-grow-1",name:"maxEmployees",placeholder:"Maximum Employees",value:o.maxEmployees,onChange:u}),Object(a.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary",children:"Submit"})]})});return"jobs"===n?b:m},k=n(149),E=n(150),S=n(151),I=n.n(S),F="https://joblyback.herokuapp.com",L=function(){function e(){Object(k.a)(this,e)}return Object(E.a)(e,null,[{key:"request",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r,s,c,o,i,u=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},a=u.length>2&&void 0!==u[2]?u[2]:"get",r=localStorage.getItem(D),console.debug("API Call:",t,n,a),s="".concat(F,"/").concat(t),c={Authorization:"Bearer ".concat(r)},o="get"===a?n:{},e.prev=7,e.next=10,I()({url:s,method:a,data:n,params:o,headers:c});case 10:return e.abrupt("return",e.sent.data);case 13:throw e.prev=13,e.t0=e.catch(7),console.error("API Error:",e.t0.response),i=e.t0.response.data.error.message,Array.isArray(i)?i:[i];case 18:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"formatSearchData",value:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){return""!==e[1]})))}},{key:"getCompanies",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n=this.formatSearchData(t),e.next=4,this.request("companies",Object(C.a)({},n));case 4:return a=e.sent,e.abrupt("return",a.companies);case 8:return e.next=10,this.request("jobs",Object(C.a)({},t));case 10:return r=e.sent,e.abrupt("return",r.jobs);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompany",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("companies/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.company);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getJobs",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n=this.formatSearchData(t),e.next=4,this.request("jobs",Object(C.a)({},n));case 4:return a=e.sent,e.abrupt("return",a.jobs);case 8:return e.next=10,this.request("jobs",Object(C.a)({},t));case 10:return r=e.sent,e.abrupt("return",r.jobs);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyToJob",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t,"/jobs/").concat(n),{},"post");case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/token",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveProfile",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),n,"patch");case 2:return a=e.sent,e.abrupt("return",a.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();var B=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1];function c(){return(c=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getCompanies(t);case 2:n=e.sent,s(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getCompanies();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsxs)("div",{className:"Companies col-md-8 offset-md-2",children:[Object(a.jsx)(A,{endpoint:"companies",searchFor:function(e){return c.apply(this,arguments)},view:"company"}),Object(a.jsx)(N,{cards:n})]})};var U=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],c=Object(r.useContext)(d).currentUser;function o(e){return i.apply(this,arguments)}function i(){return(i=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getJobs(t);case 2:n=e.sent,s(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(u.a)(l.a.mark((function e(t){var a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[t].id,e.next=3,L.applyToJob(c.username,a);case 3:r=e.sent,o=Object.keys(r)[0],s((function(e){return e.map((function(e){return e.id===a?Object(C.a)(Object(C.a)({},e),{},{state:o}):e}))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){o()}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.applications,e.next=3,L.getJobs();case 3:n=e.sent,a=new Set(t.map((function(e){return e}))),n=n.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{state:a.has(e.id)?"applied":null})})),s(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),Object(a.jsxs)("div",{className:"Jobs col-md-8 offset-md-2",children:[Object(a.jsx)(A,{endpoint:"jobs",searchFor:o,view:"jobs"}),Object(a.jsx)(N,{cards:n,apply:function(e){return b.apply(this,arguments)}})]})};var Y=function(){var e=Object(O.h)().handle,t=Object(r.useContext)(d).currentUser,n=Object(r.useState)(null),s=Object(j.a)(n,2),c=s[0],o=s[1];function i(){return(i=Object(u.a)(l.a.mark((function e(n){var a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c&&Array.isArray(c.jobs)&&n<c.jobs.length)){e.next=7;break}return a=c.jobs[n].id,e.next=4,L.applyToJob(t.username,a);case 4:r=e.sent,s=Object.keys(r)[0],o((function(e){var t=Object(C.a)({},e);return t.jobs=t.jobs.map((function(e){return e.id===a?Object(C.a)(Object(C.a)({},e),{},{state:s}):e})),t}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function n(){return(n=Object(u.a)(l.a.mark((function n(){var a,r,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.applications,n.next=3,L.getCompany(e);case 3:r=n.sent,s=new Set(a.map((function(e){return e}))),r.jobs=r.jobs.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{state:s.has(e.id)?"applied":null})})),o(r);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,t]),c?Object(a.jsxs)("div",{className:"col-md-8 offset-md-2",children:[Object(a.jsx)("h5",{className:"text-capitalize",children:c.name}),Object(a.jsx)("p",{children:c.description}),Object(a.jsx)(N,{cards:c.jobs,apply:function(e){return i.apply(this,arguments)}})]}):Object(a.jsx)("div",{children:"Loading..."})},T=n(327);function P(e){var t=e.type,n=e.messages;return Object(a.jsx)("div",{className:"alert alert-".concat(t),role:"alert",children:n.map((function(e){return Object(a.jsx)("p",{className:"mb-0 small",children:e},Object(T.a)())}))})}P.defaultProps={type:"danger",messages:[]};var J=P;n(322);var W=function(e){var t=e.setToken,n=Object(O.g)(),s=Object(r.useState)("login"),c=Object(j.a)(s,2),o=c[0],i=c[1],b=Object(r.useState)({username:"",password:"",firstName:"",lastName:"",email:"",errors:[]}),m=Object(j.a)(b,2),p=m[0],f=m[1];function d(e){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(l.a.mark((function e(a){var r,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),"signup"===o?(r={username:p.username,password:p.password,firstName:p.firstName||void 0,lastName:p.lastName||void 0,email:p.email||void 0},s="register"):(r={username:p.username,password:p.password},s="login"),e.prev=2,e.next=5,L[s](r);case 5:c=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",f((function(t){return Object(C.a)(Object(C.a)({},t),{},{errors:e.t0})})));case 11:t(c),n.push("/jobs");case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function x(e){var t=e.target,n=t.name,a=t.value;f((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(w.a)({},n,a))}))}var v="login"===o,g=Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"First name"}),Object(a.jsx)("input",{name:"firstName",className:"form-control",value:p.firstName,onChange:x})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Last name"}),Object(a.jsx)("input",{name:"lastName",className:"form-control",value:p.lastName,onChange:x})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",className:"form-control",value:p.email,onChange:x})]})]});return Object(a.jsx)("div",{className:"Login",children:Object(a.jsxs)("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4",children:[Object(a.jsx)("div",{className:"d-flex justify-content-end",children:Object(a.jsxs)("div",{className:"btn-group",children:[Object(a.jsx)("button",{className:"btn btn-primary ".concat(v?"active":""," "),onClick:function(){i("login")},children:"Login"}),Object(a.jsx)("button",{className:"btn btn-primary ".concat(v?"":"active"," "),onClick:function(){i("signup")},children:"Sign up"})]})}),Object(a.jsx)("div",{className:"card",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("form",{onSubmit:d,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Username"}),Object(a.jsx)("input",{name:"username",className:"form-control",value:p.username,onChange:x})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",className:"form-control",value:p.password,onChange:x})]}),v?"":g,p.errors.length?Object(a.jsx)(J,{type:"danger",messages:p.errors}):null,Object(a.jsx)("button",{type:"submit",className:"btn btn-primary float-right",onSubmit:d,children:"Submit"})]})})})]})})};var Q=function(){var e=Object(r.useContext)(d),t=e.currentUser,n=e.setCurrentUser,s=Object(r.useState)({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",photo_url:t.photo_url||"",username:t.username,password:"",errors:[],saveConfirmed:!1}),c=Object(j.a)(s,2),o=c[0],i=c[1],b=Object(r.useRef)(!1);function m(){return(m=Object(u.a)(l.a.mark((function e(t){var a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={first_name:o.first_name||void 0,last_name:o.last_name||void 0,email:o.email||void 0,photo_url:o.photo_url||void 0,password:o.password},r=o.username,e.next=6,L.saveProfile(r,a);case 6:s=e.sent,console.log("UPDATED USER",s),i((function(e){return Object(C.a)(Object(C.a)({},e),{},{errors:[],saveConfirmed:!0,password:""})})),n(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),i((function(t){return Object(C.a)(Object(C.a)({},t),{},{errors:e.t0})}));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function p(e){var t=e.target,n=t.name,a=t.value;i((function(e){var t;return Object(C.a)(Object(C.a)({},e),{},(t={},Object(w.a)(t,n,a),Object(w.a)(t,"errors",[]),t))}))}return Object(r.useEffect)((function(){o.saveConfirmed&&!b.current&&(b.current=!0,setTimeout((function(){i((function(e){return Object(C.a)(Object(C.a)({},e),{},{saveConfirmed:!1})})),b.current=!1}),3e3))}),[o]),Object(a.jsxs)("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4",children:[Object(a.jsx)("h3",{children:"Profile"}),Object(a.jsx)("div",{className:"card",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("form",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Username"}),Object(a.jsx)("p",{className:"form-control-plaintext",children:o.username})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"First Name"}),Object(a.jsx)("input",{name:"first_name",className:"form-control",value:o.first_name,onChange:p})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Last Name"}),Object(a.jsx)("input",{name:"last_name",className:"form-control",value:o.last_name,onChange:p})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{name:"email",className:"form-control",value:o.email,onChange:p})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Photo URL"}),Object(a.jsx)("input",{name:"photo_url",className:"form-control",value:o.photo_url,onChange:p})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Confirm password to make changes:"}),Object(a.jsx)("input",{type:"password",name:"password",className:"form-control",value:o.password,onChange:p})]}),o.errors.length?Object(a.jsx)(J,{type:"danger",messages:o.errors}):null,o.saveConfirmed?Object(a.jsx)(J,{type:"success",messages:["User updated successfully."]}):null,Object(a.jsx)("button",{className:"btn btn-primary btn-block mt-4",onClick:function(e){return m.apply(this,arguments)},children:"Save Changes"})]})})})]})};var q=function(e){var t=e.exact,n=e.path,s=e.children;return Object(r.useContext)(d).currentUser?Object(a.jsx)(O.b,{exact:t,path:n,children:s}):Object(a.jsx)(O.a,{to:"/login"})};var R=function(e){var t=e.setToken;return Object(a.jsx)("div",{className:"pt-5",children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"/",children:Object(a.jsx)(x,{})}),Object(a.jsx)(O.b,{exact:!0,path:"/login",children:Object(a.jsx)(W,{setToken:t})}),Object(a.jsx)(q,{exact:!0,path:"/companies",children:Object(a.jsx)(B,{})}),Object(a.jsx)(q,{exact:!0,path:"/jobs",children:Object(a.jsx)(U,{})}),Object(a.jsx)(q,{path:"/companies/:handle",children:Object(a.jsx)(Y,{})}),Object(a.jsx)(q,{path:"/profile",children:Object(a.jsx)(Q,{})})]})})},D=(n(323),n(324),"jobly-token");var G=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(null),o=Object(j.a)(c,2),i=o[0],O=o[1],x=f(D),v=Object(j.a)(x,2),g=v[0],y=v[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(m.decode)(g),n=t.username,e.next=4,L.getCurrentUser(n);case 4:a=e.sent,O(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O(null);case 11:s(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}s(!1),function(){e.apply(this,arguments)}()}),[g]),n?Object(a.jsx)(b.a,{children:Object(a.jsx)(d.Provider,{value:{currentUser:i,setCurrentUser:O},children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(h,{logout:function(){O(null),y(null)}}),Object(a.jsx)(R,{setToken:y})]})})}):Object(a.jsx)(p.ClipLoader,{size:150,color:"#123abc"})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,328)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(G,{})}),document.getElementById("root")),H()}},[[325,1,2]]]);
//# sourceMappingURL=main.198719aa.chunk.js.map